{% extends 'users/profile.html' %}
{% load static %}

    {% block body %}
<!-- Start Pricing Table Area -->

   <div class="wrapper">

  <div class="main-text" >
  {% for schedule in timetable %}
      {% if schedule.event_date >= hackathon_date.start_date and schedule.event_date <= hackathon_date.end_date %}
          {% ifchanged %}

          <div class="table-responsive">
            <table class="table table-striped table-sm">
                  <h2> {{ schedule.event_date | date:'d F Y' }}</h2><br>
              <thead>
                <tr>
                  <th scope="col" width="120px">Время</th>
                  <th scope="col">Содержание мероприятия</th>
                  <th scope="col" width="200px">Место проведения</th>
                </tr>
              </thead>
              <tbody>
            {% endifchanged %}
                <tr>
                  <td>{{ schedule.start_time }} - {{ schedule.end_time }}</td>
                  <td>{{ schedule.event_content }}</td>
                {% if schedule.venue == None %}
                  <td> </td>
                {% else %}
                  <td>{{ schedule.venue }}</td>
                {% endif %}
                </tr>
      {% endif %}
  {% endfor %}


          </tbody>
        </table>
      </div>

            </table>
          </div>
  </div>

       <script>
        const finaleDate = new Date("November 20, 2023 00:00:00").getTime();

        const timer = () => {
            const now = new Date().getTime();
            let diff = finaleDate - now;
            if (diff < 0) {
                document.querySelector('.alert').style.display = 'block';
                document.querySelector('.container').style.display = 'none';
            }

            let days = Math.floor(diff / (1000 * 60 * 60 * 24));
            let hours = Math.floor(diff % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));
            let minutes = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60));
            let seconds = Math.floor(diff % (1000 * 60) / 1000);

            days <= 99 ? days = `0${days}` : days;
            days <= 9 ? days = `00${days}` : days;
            hours <= 9 ? hours = `0${hours}` : hours;
            minutes <= 9 ? minutes = `0${minutes}` : minutes;
            seconds <= 9 ? seconds = `0${seconds}` : seconds;

            document.querySelector('#days').textContent = days;
            document.querySelector('#hours').textContent = hours;
            document.querySelector('#minutes').textContent = minutes;
            document.querySelector('#seconds').textContent = seconds;

        }
        timer();
        setInterval(timer, 1000);
    </script>
{% endblock %}